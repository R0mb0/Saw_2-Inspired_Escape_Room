<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; padding: 2em; }
    .posts-list { list-style: none; padding: 0; }
    .post-preview { margin-bottom: 2em; }
    .post-title { font-size: 1.5em; margin: 0; }
    .post-subtitle { color: #666; margin: 0.2em 0 0.5em 0; }
  </style>
</head>
<body>
  <h1>{{ page.title }}</h1>
  {% if page.subtitle %}<h2>{{ page.subtitle }}</h2>{% endif %}

  <p>DEBUG: La home Ã¨ attiva!</p>

  {% assign posts = site.posts %}
  {% assign scored_posts = "" %}
  {% for post in posts %}
    {% assign score_str = post.title | split: " " | first %}
    {% if score_str %}
      {% assign score = score_str | plus: 0 %}
    {% else %}
      {% assign score = 0 %}
    {% endif %}
    {% capture scored_posts %}{{ scored_posts }}{{ score }}|||{{ forloop.index0 }}~~~{% endcapture %}
  {% endfor %}
  {% assign scored_posts_array = scored_posts | split: "~~~" %}
  {% assign scored_posts_sorted = scored_posts_array | sort | reverse %}

  <ul class="posts-list">
    {% for item in scored_posts_sorted %}
      {% unless item == "" %}
        {% assign fields = item | split: "|||" %}
        {% assign post_index = fields[1] | plus: 0 %}
        {% assign post = posts[post_index] %}
        <li class="post-preview">
          <a href="{{ post.url | absolute_url }}">
            <h2 class="post-title">{{ post.title }}</h2>
            {% if post.subtitle %}
              <h3 class="post-subtitle">{{ post.subtitle }}</h3>
            {% endif %}
          </a>
        </li>
      {% endunless %}
    {% endfor %}
  </ul>
</body>
</html>